{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport { storage, db } from \"../../config/firebase\";\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { collection, addDoc, getDocs, doc } from \"firebase/firestore\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { useState } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function Estoque() {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    nome = _useState2[0],\n    setNome = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    pasta = _useState4[0],\n    setPasta = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    image = _useState6[0],\n    setImage = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    previewUrl = _useState8[0],\n    setPreviewUrl = _useState8[1];\n  var enviarDados = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (image) {\n        var storageRef = ref(storage, `${pasta}/${nome}`);\n        var upload = uploadBytes(storageRef, image).then(function (snapshot) {\n          console.log('Uploaded a blob or file!');\n        }).catch(function (erro) {\n          console.log(erro.message);\n        });\n        yield upload;\n        var imageref = ref(storage, `${pasta}/${nome}`);\n        var downloadURL = yield getDownloadURL(imageref);\n        yield db.collection('produtos').add({\n          nomeProduto: nomeProduto,\n          marca: marca,\n          preco: preco,\n          imageUrl: downloadURL,\n          folder: folder\n        });\n      } else {\n        console.log('Nenhuma imagem selecionada.');\n      }\n    });\n    return function enviarDados() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleChange = function handleChange(e) {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n      setPreviewUrl(URL.createObjectURL(e.target.files[0]));\n    }\n  };\n  return _jsxs(View, {\n    children: [_jsx(TextInput, {\n      onChangeText: setNome\n    }), _jsx(TextInput, {\n      onChangeText: setPasta\n    }), _jsx(\"label\", {\n      htmlFor: \"file\",\n      children: \"Enviar arquivo\"\n    }), _jsx(\"input\", {\n      type: \"file\",\n      name: \"file\",\n      id: \"file\",\n      onChange: handleChange,\n      style: {\n        display: 'none'\n      }\n    }), previewUrl && _jsx(Image, {\n      source: {\n        uri: previewUrl\n      },\n      style: {\n        width: 200,\n        height: 200\n      }\n    }), _jsx(TouchableOpacity, {\n      onPress: enviarDados,\n      children: _jsx(Text, {\n        children: \"Upload\"\n      })\n    })]\n  });\n}","map":{"version":3,"names":["React","storage","db","ref","uploadBytes","getDownloadURL","collection","addDoc","getDocs","doc","View","TouchableOpacity","Text","Image","TextInput","useState","jsx","_jsx","jsxs","_jsxs","Estoque","_useState","_useState2","_slicedToArray","nome","setNome","_useState3","_useState4","pasta","setPasta","_useState5","_useState6","image","setImage","_useState7","_useState8","previewUrl","setPreviewUrl","enviarDados","_ref","_asyncToGenerator","storageRef","upload","then","snapshot","console","log","catch","erro","message","imageref","downloadURL","add","nomeProduto","marca","preco","imageUrl","folder","apply","arguments","handleChange","e","target","files","URL","createObjectURL","children","onChangeText","htmlFor","type","name","id","onChange","style","display","source","uri","width","height","onPress"],"sources":["C:/Users/manel/Documents/Projeto-3-BIM-PMovel-main/src/Componentes/Estoque/Estoque.js"],"sourcesContent":["import React from 'react';\r\nimport { storage, db } from '../../config/firebase';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { collection, addDoc, getDocs, doc } from \"firebase/firestore\";\r\nimport { View, TouchableOpacity, Text, Image, TextInput } from 'react-native';\r\nimport { useState } from 'react';\r\n\r\nexport function Estoque() {\r\n    const [nome, setNome] = useState(\"\")\r\n    const [pasta, setPasta] = useState(\"\")\r\n    const [image, setImage] = useState(\"\")\r\n    const [previewUrl, setPreviewUrl] = useState(\"\");\r\n\r\n    const enviarDados = async () => {\r\n        if (image) {\r\n            const storageRef = ref(storage, `${pasta}/${nome}`);\r\n\r\n            const upload = uploadBytes(storageRef, image)\r\n                .then((snapshot) => {\r\n                    console.log('Uploaded a blob or file!');\r\n                })\r\n                .catch((erro) => {\r\n                    console.log(erro.message);\r\n                });\r\n            \r\n            \r\n            await upload;\r\n\r\n            const imageref = ref(storage, `${pasta}/${nome}`)\r\n            const downloadURL = await getDownloadURL(imageref);\r\n            \r\n            await db.collection('produtos').add({\r\n                nomeProduto,\r\n                marca,\r\n                preco,\r\n                imageUrl: downloadURL,\r\n                folder,\r\n            });\r\n            \r\n        } else {\r\n            console.log('Nenhuma imagem selecionada.');\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        if (e.target.files[0]) {\r\n            setImage(e.target.files[0]);\r\n            setPreviewUrl(URL.createObjectURL(e.target.files[0]));\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <View>\r\n            <TextInput onChangeText={setNome}></TextInput>\r\n            <TextInput onChangeText={setPasta}></TextInput>\r\n            <label htmlFor=\"file\">Enviar arquivo</label>\r\n            <input type='file' name='file' id='file' onChange={handleChange} style={{display: 'none'}}/>\r\n            {previewUrl && <Image source={{ uri: previewUrl }} style={{ width: 200, height: 200 }} />}\r\n            <TouchableOpacity onPress={enviarDados}>\r\n                <Text>Upload</Text>\r\n            </TouchableOpacity>\r\n        </View>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}