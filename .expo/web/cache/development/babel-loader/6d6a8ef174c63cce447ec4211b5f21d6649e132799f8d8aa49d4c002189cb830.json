{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImagePicker from 'react-native-image-picker';\nimport storage from '@react-native-firebase/storage';\nimport firestore from '@react-native-firebase/firestore';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function Estoque() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    image = _useState2[0],\n    setImage = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    marca = _useState4[0],\n    setMarca = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    nomeProduto = _useState6[0],\n    setNomeProduto = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    preco = _useState8[0],\n    setPreco = _useState8[1];\n  var pickImage = function pickImage() {\n    ImagePicker.showImagePicker({}, function (response) {\n      if (response.didCancel) {\n        console.log('User cancelled image picker');\n      } else if (response.error) {\n        console.log('ImagePicker Error: ', response.error);\n      } else {\n        var source = {\n          uri: response.uri\n        };\n        setImage(source);\n      }\n    });\n  };\n  var uploadImage = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var uri = image.uri;\n      var filename = uri.substring(uri.lastIndexOf('/') + 1);\n      var uploadUri = Platform.OS === 'ios' ? uri.replace('file://', '') : uri;\n      var storageRef = storage().ref(`images/${filename}`);\n      var task = storageRef.putFile(uploadUri);\n      try {\n        yield task;\n        var downloadURL = yield storageRef.getDownloadURL();\n        yield firestore().collection('produtos').add({\n          marca: marca,\n          nomeProduto: nomeProduto,\n          preco: preco,\n          imageUrl: downloadURL\n        });\n        console.log('Image uploaded successfully!');\n      } catch (e) {\n        console.error('Error uploading image:', e);\n      }\n    });\n    return function uploadImage() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    children: [_jsx(TouchableOpacity, {\n      onPress: pickImage,\n      children: _jsx(Text, {\n        children: \"Escolha uma imagem\"\n      })\n    }), image && _jsx(Image, {\n      source: image,\n      style: {\n        width: 200,\n        height: 200\n      }\n    }), _jsx(TextInput, {\n      placeholder: \"Marca\",\n      value: marca,\n      onChangeText: function onChangeText(text) {\n        return setMarca(text);\n      }\n    }), _jsx(TextInput, {\n      placeholder: \"Nome do Produto\",\n      value: nomeProduto,\n      onChangeText: function onChangeText(text) {\n        return setNomeProduto(text);\n      }\n    }), _jsx(TextInput, {\n      placeholder: \"Pre\\xE7o\",\n      value: preco,\n      onChangeText: function onChangeText(text) {\n        return setPreco(text);\n      }\n    }), _jsx(Button, {\n      title: \"Upload\",\n      onPress: uploadImage\n    })]\n  });\n}\n;","map":{"version":3,"names":["React","useState","View","Text","TextInput","Button","Image","TouchableOpacity","ImagePicker","storage","firestore","jsx","_jsx","jsxs","_jsxs","Estoque","_useState","_useState2","_slicedToArray","image","setImage","_useState3","_useState4","marca","setMarca","_useState5","_useState6","nomeProduto","setNomeProduto","_useState7","_useState8","preco","setPreco","pickImage","showImagePicker","response","didCancel","console","log","error","source","uri","uploadImage","_ref","_asyncToGenerator","filename","substring","lastIndexOf","uploadUri","Platform","OS","replace","storageRef","ref","task","putFile","downloadURL","getDownloadURL","collection","add","imageUrl","e","apply","arguments","children","onPress","style","width","height","placeholder","value","onChangeText","text","title"],"sources":["C:/Users/manel/Documents/Projeto-3-BIM-PMovel-main/src/Componentes/Estoque/Estoque.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { View, Text, TextInput, Button, Image, TouchableOpacity } from 'react-native';\r\nimport ImagePicker from 'react-native-image-picker';\r\nimport storage from '@react-native-firebase/storage';\r\nimport firestore from '@react-native-firebase/firestore';\r\n\r\nexport function Estoque() {\r\n    const [image, setImage] = useState(null);\r\n    const [marca, setMarca] = useState('');\r\n    const [nomeProduto, setNomeProduto] = useState('');\r\n    const [preco, setPreco] = useState('');\r\n  \r\n    const pickImage = () => {\r\n      ImagePicker.showImagePicker({}, response => {\r\n        if (response.didCancel) {\r\n          console.log('User cancelled image picker');\r\n        } else if (response.error) {\r\n          console.log('ImagePicker Error: ', response.error);\r\n        } else {\r\n          const source = { uri: response.uri };\r\n          setImage(source);\r\n        }\r\n      });\r\n    };\r\n  \r\n    const uploadImage = async () => {\r\n      const { uri } = image;\r\n      const filename = uri.substring(uri.lastIndexOf('/') + 1);\r\n      const uploadUri = Platform.OS === 'ios' ? uri.replace('file://', '') : uri;\r\n  \r\n      const storageRef = storage().ref(`images/${filename}`);\r\n      const task = storageRef.putFile(uploadUri);\r\n  \r\n      try {\r\n        await task;\r\n        const downloadURL = await storageRef.getDownloadURL();\r\n  \r\n        // Adicione os metadados ao Firestore\r\n        await firestore().collection('produtos').add({\r\n          marca,\r\n          nomeProduto,\r\n          preco,\r\n          imageUrl: downloadURL,\r\n        });\r\n  \r\n        console.log('Image uploaded successfully!');\r\n      } catch (e) {\r\n        console.error('Error uploading image:', e);\r\n      }\r\n    };\r\n  \r\n    return (\r\n      <View>\r\n        <TouchableOpacity onPress={pickImage}>\r\n          <Text>Escolha uma imagem</Text>\r\n        </TouchableOpacity>\r\n  \r\n        {image && <Image source={image} style={{ width: 200, height: 200 }} />}\r\n  \r\n        <TextInput\r\n          placeholder=\"Marca\"\r\n          value={marca}\r\n          onChangeText={text => setMarca(text)}\r\n        />\r\n  \r\n        <TextInput\r\n          placeholder=\"Nome do Produto\"\r\n          value={nomeProduto}\r\n          onChangeText={text => setNomeProduto(text)}\r\n        />\r\n  \r\n        <TextInput\r\n          placeholder=\"PreÃ§o\"\r\n          value={preco}\r\n          onChangeText={text => setPreco(text)}\r\n        />\r\n  \r\n        <Button title=\"Upload\" onPress={uploadImage} />\r\n      </View>\r\n    );\r\n  };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}